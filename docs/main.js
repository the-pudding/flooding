parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"or4r":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,c=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,v=a||s||Function("return this")(),l=Object.prototype,p=l.toString,b=Math.max,m=Math.min,y=function(){return v.Date.now()};function d(t,n,r){var i,o,u,f,c,a,s=0,v=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError(e);function d(e){var n=i,r=o;return i=o=void 0,s=e,f=t.apply(r,n)}function g(t){var e=t-a;return void 0===a||e>=n||e<0||l&&t-s>=u}function O(){var t=y();if(g(t))return x(t);c=setTimeout(O,function(t){var e=n-(t-a);return l?m(e,u-(t-s)):e}(t))}function x(t){return c=void 0,p&&i?d(t):(i=o=void 0,f)}function T(){var t=y(),e=g(t);if(i=arguments,o=this,a=t,e){if(void 0===c)return function(t){return s=t,c=setTimeout(O,n),v?d(t):f}(a);if(l)return c=setTimeout(O,n),d(a)}return void 0===c&&(c=setTimeout(O,n)),f}return n=h(n)||0,j(r)&&(v=!!r.leading,u=(l="maxWait"in r)?b(h(r.maxWait)||0,n):u,p="trailing"in r?!!r.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=a=o=c=void 0},T.flush=function(){return void 0===c?f:x(y())},T}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||g(t)&&p.call(t)==r}function h(t){if("number"==typeof t)return t;if(O(t))return n;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||f.test(t)?c(t.slice(2),r?2:8):o.test(t)?n:+t}module.exports=d;
},{}],"WEtf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}},e=r;exports.default=e;
},{}],"hZBy":[function(require,module,exports) {
"use strict";function e(e){return r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function o(e){return document.querySelector(e)}function s(t){return e((arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t))}function c(t,n){return e(t.querySelectorAll(n))}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)".concat(t.split(" ").join("|"),"(\\b|$)"),"gi")," ")}function l(e,t){e.classList?e.classList.add(t):e.className="".concat(e.className," ").concat(t)}function i(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )".concat(t,"( |$)"),"gi").test(e.className)}function u(e,t){t=t||0;var n=e.getBoundingClientRect().top+t,r=(window.pageYOffset||document.documentElement.scrollTop)+n;window.scrollTo(0,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=o,exports.selectAll=s,exports.find=c,exports.removeClass=a,exports.addClass=l,exports.hasClass=i,exports.jumpTo=u;
},{}],"U9xJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./dom");function t(){(0,e.selectAll)("[target='_blank']").forEach(function(e){return e.setAttribute("rel","noopener")})}
},{"./dom":"hZBy"}],"v9Q8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Womenâ€™s Pockets are Inferior"}],t=null;function n(e,t){var n=document.getElementsByTagName("script")[0],o=document.createElement("script");return o.src=e,o.async=!0,n.parentNode.insertBefore(o,n),t&&"function"==typeof t&&(o.onload=t),o}function o(t){var n=new XMLHttpRequest,o=Date.now(),r="https://pudding.cool/assets/data/stories.json?v=".concat(o);n.open("GET",r,!0),n.onload=function(){if(n.status>=200&&n.status<400){var o=JSON.parse(n.responseText);t(o)}else t(e)},n.onerror=function(){return t(e)},n.send()}function r(e){return"\n\t<a class='footer-recirc__article' href='https://pudding.cool/".concat(e.url,"' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/").concat(e.image,".jpg' alt='").concat(e.hed,"'>\n\t\t<p class='article__headline'>").concat(e.hed,"</p>\n\t</a>\n\t")}function a(){var e=window.location.href,n=t.filter(function(t){return!e.includes(t.url)}).slice(0,4).map(r).join("");d3.select(".pudding-footer .footer-recirc__articles").html(n)}function s(){o(function(e){t=e,a()})}var c={init:s};exports.default=c;
},{}],"HxQE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d3.format(",");function t(t){var o={type:"FeatureCollection",features:[]};return t=t.map(function(t){return{type:"Feature",properties:{id:"Zipcode: "+t.locationName,count:+t["FS 2020 100 Year Risk (total)"],countFormatted:e(+t["FS 2020 100 Year Risk (total)"])},geometry:{type:"Point",coordinates:[t.Longitude,t.Latitude]}}}),o.features=t,o}var o={init:t};exports.default=o;
},{}],"PndQ":[function(require,module,exports) {
function t(t){if(t)return e(t)}function e(e){for(var s in t.prototype)e[s]=t.prototype[s];return e}"undefined"!=typeof module&&(module.exports=t),t.prototype.on=t.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},t.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((s=r[i])===e||s.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},t.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(s){r=0;for(var i=(s=s.slice(0)).length;r<i;++r)s[r].apply(this,e)}return this},t.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},t.prototype.hasListeners=function(t){return!!this.listeners(t).length};
},{}],"L4M6":[function(require,module,exports) {
module.exports=t,t.default=t,t.stable=o,t.stableStringify=o;var r=[],e=[];function t(t,i,o){var f;for(n(t,"",[],void 0),f=0===e.length?JSON.stringify(t,i,o):JSON.stringify(t,u(i),o);0!==r.length;){var l=r.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}return f}function n(t,i,o,f){var u;if("object"==typeof t&&null!==t){for(u=0;u<o.length;u++)if(o[u]===t){var l=Object.getOwnPropertyDescriptor(f,i);return void(void 0!==l.get?l.configurable?(Object.defineProperty(f,i,{value:"[Circular]"}),r.push([f,i,t,l])):e.push([t,i]):(f[i]="[Circular]",r.push([f,i,t])))}if(o.push(t),Array.isArray(t))for(u=0;u<t.length;u++)n(t[u],u,o,t);else{var a=Object.keys(t);for(u=0;u<a.length;u++){var c=a[u];n(t[c],c,o,t)}}o.pop()}}function i(r,e){return r<e?-1:r>e?1:0}function o(t,n,i){var o,l=f(t,"",[],void 0)||t;for(o=0===e.length?JSON.stringify(l,n,i):JSON.stringify(l,u(n),i);0!==r.length;){var a=r.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}return o}function f(t,n,o,u){var l;if("object"==typeof t&&null!==t){for(l=0;l<o.length;l++)if(o[l]===t){var a=Object.getOwnPropertyDescriptor(u,n);return void(void 0!==a.get?a.configurable?(Object.defineProperty(u,n,{value:"[Circular]"}),r.push([u,n,t,a])):e.push([t,n]):(u[n]="[Circular]",r.push([u,n,t])))}if("function"==typeof t.toJSON)return;if(o.push(t),Array.isArray(t))for(l=0;l<t.length;l++)f(t[l],l,o,t);else{var c={},p=Object.keys(t).sort(i);for(l=0;l<p.length;l++){var s=p[l];f(t[s],s,o,t),c[s]=t[s]}if(void 0===u)return c;r.push([u,n,t]),u[n]=c}o.pop()}}function u(r){return r=void 0!==r?r:function(r,e){return e},function(t,n){if(e.length>0)for(var i=0;i<e.length;i++){var o=e[i];if(o[1]===t&&o[0]===n){n="[Circular]",e.splice(i,1);break}}return r.call(this,t,n)}}
},{}],"ymYf":[function(require,module,exports) {
"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(t)}function t(t){return null!==t&&"object"===o(t)}module.exports=t;
},{}],"zs9O":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e=require("./is-object");function r(t){if(t)return i(t)}function i(t){for(var e in r.prototype)Object.prototype.hasOwnProperty.call(r.prototype,e)&&(t[e]=r.prototype[e]);return t}module.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},r.prototype.parse=function(t){return this._parser=t,this},r.prototype.responseType=function(t){return this._responseType=t,this},r.prototype.serialize=function(t){return this._serializer=t,this},r.prototype.timeout=function(e){if(!e||"object"!==t(e))return this._timeout=e,this._responseTimeout=0,this._uploadTimeout=0,this;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))switch(r){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;case"upload":this._uploadTimeout=e.upload;break;default:console.warn("Unknown timeout option",r)}return this},r.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];r.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(t,e);if(!0===r)return!0;if(!1===r)return!1}catch(i){console.error(i)}if(e&&e.status&&e.status>=500&&501!==e.status)return!0;if(t){if(t.code&&o.includes(t.code))return!0;if(t.timeout&&"ECONNABORTED"===t.code)return!0;if(t.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},r.prototype.then=function(t,e){var r=this;if(!this._fullfilledPromise){var i=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(t,e){i.on("abort",function(){if(r.timedout&&r.timedoutError)e(r.timedoutError);else{var t=new Error("Aborted");t.code="ABORTED",t.status=r.status,t.method=r.method,t.url=r.url,e(t)}}),i.end(function(r,i){r?e(r):t(i)})})}return this._fullfilledPromise.then(t,e)},r.prototype.catch=function(t){return this.then(void 0,t)},r.prototype.use=function(t){return t(this),this},r.prototype.ok=function(t){if("function"!=typeof t)throw new Error("Callback required");return this._okCallback=t,this},r.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},r.prototype.get=function(t){return this._header[t.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(t,r){if(e(t)){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.set(i,t[i]);return this}return this._header[t.toLowerCase()]=r,this.header[t]=r,this},r.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},r.prototype.field=function(t,r){if(null==t)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(e(t)){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&this.field(i,t[i]);return this}if(Array.isArray(r)){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&this.field(t,r[o]);return this}if(null==r)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof r&&(r=String(r)),this._getFormData().append(t,r),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(t,e,r,i){switch(r.type){case"basic":this.set("Authorization","Basic ".concat(i("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t))}return this},r.prototype.withCredentials=function(t){return void 0===t&&(t=!0),this._withCredentials=t,this},r.prototype.redirects=function(t){return this._maxRedirects=t,this},r.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw new TypeError("Invalid argument");return this._maxResponseSize=t,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(t){var r=e(t),i=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(r&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(r&&e(this._data))for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(this._data[o]=t[o]);else"string"==typeof t?(i||this.type("form"),i=this._header["content-type"],this._data="application/x-www-form-urlencoded"===i?this._data?"".concat(this._data,"&").concat(t):t:(this._data||"")+t):this._data=t;return!r||this._isHost(t)?this:(i||this.type("json"),this)},r.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},r.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var r=this.url.slice(e+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.slice(0,e)+"?"+r.join("&")}}},r.prototype._appendQueryString=function(){console.warn("Unsupported")},r.prototype._timeoutError=function(t,e,r){if(!this._aborted){var i=new Error("".concat(t+e,"ms exceeded"));i.timeout=e,i.code="ECONNABORTED",i.errno=r,this.timedout=!0,this.timedoutError=i,this.abort(),this.callback(i)}},r.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};
},{"./is-object":"ymYf"}],"wfik":[function(require,module,exports) {
"use strict";exports.type=function(e){return e.split(/ *; */).shift()},exports.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},exports.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},exports.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e};
},{}],"afOI":[function(require,module,exports) {
"use strict";var t=require("./utils");function e(t){if(t)return r(t)}function r(t){for(var r in e.prototype)Object.prototype.hasOwnProperty.call(e.prototype,r)&&(t[r]=e.prototype[r]);return t}module.exports=e,e.prototype.get=function(t){return this.header[t.toLowerCase()]},e.prototype._setHeaderProperties=function(e){var r=e["content-type"]||"";this.type=t.type(r);var s=t.params(r);for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(this[i]=s[i]);this.links={};try{e.link&&(this.links=t.parseLinks(e.link))}catch(o){}},e.prototype._setStatusProperties=function(t){var e=t/100|0;this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=1===e,this.ok=2===e,this.redirect=3===e,this.clientError=4===e,this.serverError=5===e,this.error=(4===e||5===e)&&this.toError(),this.created=201===t,this.accepted=202===t,this.noContent=204===t,this.badRequest=400===t,this.unauthorized=401===t,this.notAcceptable=406===t,this.forbidden=403===t,this.notFound=404===t,this.unprocessableEntity=422===t};
},{"./utils":"wfik"}],"zbFA":[function(require,module,exports) {
"use strict";function t(t){return n(t)||e(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function e(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function n(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}function o(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach(function(t){o.prototype[t]=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return this._defaults.push({fn:t,args:e}),this}}),o.prototype._setDefaults=function(r){this._defaults.forEach(function(e){r[e.fn].apply(r,t(e.args))})},module.exports=o;
},{}],"CC3B":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e;"undefined"!=typeof window?e=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),e=void 0):e=self;var r=require("component-emitter"),o=require("fast-safe-stringify"),n=require("./request-base"),s=require("./is-object"),i=require("./response-base"),a=require("./agent-base");function u(){}module.exports=function(t,e){return"function"==typeof e?new exports.Request("GET",t).end(e):1===arguments.length?new exports.Request("GET",t):new exports.Request(t,e)},exports=module.exports;var p=exports;exports.Request=w,p.getXHR=function(){if(e.XMLHttpRequest&&(!e.location||"file:"!==e.location.protocol||!e.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(r){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(o){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(n){}throw new Error("Browser-only version of superagent could not find XHR")};var c="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function h(t){if(!s(t))return t;var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&l(e,r,t[r]);return e.join("&")}function l(t,e,r){if(void 0!==r)if(null!==r)if(Array.isArray(r))r.forEach(function(r){l(t,e,r)});else if(s(r))for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&l(t,"".concat(e,"[").concat(o,"]"),r[o]);else t.push(encodeURI(e)+"="+encodeURIComponent(r));else t.push(encodeURI(e))}function d(t){for(var e,r,o={},n=t.split("&"),s=0,i=n.length;s<i;++s)-1===(r=(e=n[s]).indexOf("="))?o[decodeURIComponent(e)]="":o[decodeURIComponent(e.slice(0,r))]=decodeURIComponent(e.slice(r+1));return o}function f(t){for(var e,r,o,n,s=t.split(/\r?\n/),i={},a=0,u=s.length;a<u;++a)-1!==(e=(r=s[a]).indexOf(":"))&&(o=r.slice(0,e).toLowerCase(),n=c(r.slice(e+1)),i[o]=n);return i}function y(t){return/[\/+]json($|[^-\w])/.test(t)}function m(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.headers=f(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function w(t,e){var r=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t,e=null,o=null;try{o=new m(r)}catch(n){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=n,r.xhr?(e.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,e.status=r.xhr.status?r.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),r.callback(e)}r.emit("response",o);try{r._isResponseOK(o)||(t=new Error(o.statusText||o.text||"Unsuccessful HTTP response"))}catch(n){t=n}t?(t.original=e,t.response=o,t.status=o.status,r.callback(t,o)):r.callback(null,o)})}function T(t,e,r){var o=p("DELETE",t);return"function"==typeof e&&(r=e,e=null),e&&o.send(e),r&&o.end(r),o}p.serializeObject=h,p.parseString=d,p.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":h,"application/json":o},p.parse={"application/x-www-form-urlencoded":d,"application/json":JSON.parse},i(m.prototype),m.prototype._parseBody=function(t){var e=p.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&y(this.type)&&(e=p.parse["application/json"]),e&&t&&(t.length>0||t instanceof Object)?e(t):null)},m.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,o="cannot ".concat(e," ").concat(r," (").concat(this.status,")"),n=new Error(o);return n.status=this.status,n.method=e,n.url=r,n},p.Response=m,r(w.prototype),n(w.prototype),w.prototype.type=function(t){return this.set("Content-Type",p.types[t]||t),this},w.prototype.accept=function(t){return this.set("Accept",p.types[t]||t),this},w.prototype.auth=function(e,r,o){1===arguments.length&&(r=""),"object"===t(r)&&null!==r&&(o=r,r=""),o||(o={type:"function"==typeof btoa?"basic":"auto"});return this._auth(e,r,o,function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")})},w.prototype.query=function(t){return"string"!=typeof t&&(t=h(t)),t&&this._query.push(t),this},w.prototype.attach=function(t,e,r){if(e){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,r||e.name)}return this},w.prototype._getFormData=function(){return this._formData||(this._formData=new e.FormData),this._formData},w.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var r=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),r(t,e)},w.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},w.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},w.prototype.ca=w.prototype.agent,w.prototype.buffer=w.prototype.ca,w.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},w.prototype.pipe=w.prototype.write,w.prototype._isHost=function(e){return e&&"object"===t(e)&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},w.prototype.end=function(t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||u,this._finalizeQueryString(),this._end()},w.prototype._setUploadTimeout=function(){var t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){t._timeoutError("Upload timeout of ",t._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},w.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var t=this;this.xhr=p.getXHR();var e=this.xhr,r=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var r=e.readyState;if(r>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4===r){var o;try{o=e.status}catch(n){o=0}if(!o){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var o=function(e,r){r.total>0&&(r.percent=r.loaded/r.total*100,100===r.percent&&clearTimeout(t._uploadTimeoutTimer)),r.direction=e,t.emit("progress",r)};if(this.hasListeners("progress"))try{e.addEventListener("progress",o.bind(null,"download")),e.upload&&e.upload.addEventListener("progress",o.bind(null,"upload"))}catch(a){}e.upload&&this._setUploadTimeout();try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(u){return this.callback(u)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof r&&!this._isHost(r)){var n=this._header["content-type"],s=this._serializer||p.serialize[n?n.split(";")[0]:""];!s&&y(n)&&(s=p.serialize["application/json"]),s&&(r=s(r))}for(var i in this.header)null!==this.header[i]&&Object.prototype.hasOwnProperty.call(this.header,i)&&e.setRequestHeader(i,this.header[i]);this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0===r?null:r)},p.agent=function(){return new a},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(t){a.prototype[t.toLowerCase()]=function(e,r){var o=new p.Request(t,e);return this._setDefaults(o),r&&o.end(r),o}}),a.prototype.del=a.prototype.delete,p.get=function(t,e,r){var o=p("GET",t);return"function"==typeof e&&(r=e,e=null),e&&o.query(e),r&&o.end(r),o},p.head=function(t,e,r){var o=p("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&o.query(e),r&&o.end(r),o},p.options=function(t,e,r){var o=p("OPTIONS",t);return"function"==typeof e&&(r=e,e=null),e&&o.send(e),r&&o.end(r),o},p.del=T,p.delete=T,p.patch=function(t,e,r){var o=p("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&o.send(e),r&&o.end(r),o},p.post=function(t,e,r){var o=p("POST",t);return"function"==typeof e&&(r=e,e=null),e&&o.send(e),r&&o.end(r),o},p.put=function(t,e,r){var o=p("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&o.send(e),r&&o.end(r),o};
},{"component-emitter":"PndQ","fast-safe-stringify":"L4M6","./request-base":"zs9O","./is-object":"ymYf","./response-base":"afOI","./agent-base":"zbFA"}],"HZvp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ip:"72.228.10.129",hostname:"cpe-72-228-10-129.nycap.res.rr.com",type:"ipv4",continent_code:"NA",continent_name:"North America",country_code:"US",country_name:"United States",region_code:"MA",region_name:"Massachusetts",city:"Great Barrington",zip:"01230",latitude:42.1617,longitude:-73.3277,location:{geoname_id:4938157,capital:"Washington D.C.",languages:[{code:"en",name:"English",native:"English"}],country_flag:"http://assets.ipstack.com/flags/us.svg",country_flag_emoji:"ðŸ‡ºðŸ‡¸",country_flag_emoji_unicode:"U+1F1FA U+1F1F8",calling_code:"1",is_eu:!1},time_zone:{id:"America/New_York",current_time:"2018-04-17T15:29:13-04:00",gmt_offset:-14400,code:"EDT",is_daylight_saving:!0},currency:{code:"USD",name:"US Dollar",plural:"US dollars",symbol:"$",symbol_native:"$"},connection:{asn:11351,isp:"Time Warner Cable Internet LLC"},security:{is_proxy:!1,proxy_type:null,is_crawler:!1,crawler_name:null,crawler_type:null,is_tor:!1,threat_level:"low",threat_types:null}};exports.default=e;
},{}],"NSOq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("superagent")),t=r(require("./locate-test"));function r(e){return e&&e.__esModule?e:{default:e}}var n=!1,u=4e3,s=null;function o(){if(n)return Promise.resolve(t.default);return new Promise(function(t,r){e.default.get("https://api.ipify.org?format=json").end(function(e,n){e?r(e):n&&n.status>=200&&n.status<400?t(JSON.parse(n.text)):r(e)})})}function i(r){var u=r.ip;if(n)return Promise.resolve(t.default);var o="https://api.ipstack.com/".concat(u,"?access_key=").concat(s);return new Promise(function(t,r){e.default.get(o).end(function(e,n){if(e)r(e);else if(n&&n.status>=200&&n.status<400){var u=JSON.parse(n.text);u.error?r(u.error):t(u)}else r(e)})})}function a(e,t){if(e){s=e;var r=setTimeout(function(){return t("timeout")},u);o().then(i).then(function(e){clearTimeout(r),t(null,e)}).catch(function(e){return t(e)})}else t("error: must pass ipstack key")}var c=a;exports.default=c;
},{"superagent":"CC3B","./locate-test":"HZvp"}],"qaWx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./utils/locate"));function t(e){return e&&e.__esModule?e:{default:e}}function o(){}function l(e){map.setLayoutProperty(e,"text-field",["format",["get","name_clean"],{"font-scale":1},"\n",{},["get","place"],{"font-scale":.75,"text-font":["literal",["Roboto Mono Regular","Rubik Black"]]}])}function a(e){console.log(e),mapboxgl.accessToken="pk.eyJ1IjoiZG9jazQyNDIiLCJhIjoiY2pjazE5eTM2NDl2aDJ3cDUyeDlsb292NiJ9.Jr__XbmAolbLyzPDj7-8kQ";var t=new mapboxgl.Map({container:"city-cluster",style:"mapbox://styles/mapbox/light-v10",center:[-84.191605,39.758949],minZoom:4,clusterMaxZoom:10,zoom:9});t.on("load",function(){t.addSource("postal-2",{type:"vector",url:"mapbox://mapbox.boundaries-pos4-v3"}),t.addLayer({id:"postal-2-fill",type:"fill",source:"postal-2","source-layer":"boundaries_postal_4",paint:{"fill-outline-color":"rgba(0,0,0,0)","fill-opacity":.1,"fill-color":"#000"},minzoom:7},"admin-1-boundary"),t.addLayer({id:"postal-2-line",type:"line",source:"postal-2","source-layer":"boundaries_postal_4",minzoom:7,paint:{"line-width":1,"line-opacity":.8,"line-color":"#aaa"}}),t.addSource("points",{type:"geojson",data:e,cluster:!0,clusterRadius:30,clusterProperties:{pointTotal:["+",["get","count"]]}}),t.addLayer({id:"unclustered-point",type:"circle",source:"points",filter:["!",["has","point_count"]],paint:{"circle-opacity":.5,"circle-color":"#000","circle-radius":["interpolate",["linear"],["zoom"],4,["interpolate",["linear"],["get","count"],1e4,5,2e5,30],9,["interpolate",["linear"],["get","count"],500,5,1e4,30]]}}),console.log(e),t.addLayer({id:"unclustered-label",type:"symbol",source:"points",filter:["!",["has","point_count"]],paint:{"text-halo-width":1,"text-halo-color":"#FFFFFF"},layout:{"text-field":["format",["get","countFormatted"],{"font-scale":1.1,"text-font":["literal",["Open Sans Bold","Arial Unicode MS Bold"]]},"\n",{},["get","id"],{"font-scale":.85,"text-font":["literal",["Open Sans Semibold","Arial Unicode MS Bold"]]}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10}}),t.addLayer({id:"clusters",type:"circle",source:"points",filter:["has","point_count"],paint:{"circle-opacity":.8,"circle-color":["step",["get","pointTotal"],"#51bbd6",1e3,"#f1f075",1e4,"#f28cb1"],"circle-radius":["interpolate",["linear"],["zoom"],4,["interpolate",["linear"],["get","pointTotal"],1e4,5,2e5,30],9,["interpolate",["linear"],["get","pointTotal"],500,5,1e4,30]]}}),t.addLayer({id:"earthquake_label",type:"symbol",source:"points",filter:["has","point_count"],layout:{"text-field":["number-format",["get","pointTotal"],{"min-fraction-digits":0,"max-fraction-digits":0}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10}}),t.on("mousemove",function(e){var o=t.queryRenderedFeatures(e.point,{layers:["unclustered-point"]});o.length>0&&console.log(o[0])})})}var i={init:a,resize:o};exports.default=i;
},{"./utils/locate":"NSOq"}],"xZJw":[function(require,module,exports) {
"use strict";function t(t){return new Promise(function(e,n){var r=t.split(".").pop();"csv"===r?d3.csv("assets/data/".concat(t)).then(e).catch(n):"json"===r?d3.json("assets/data/".concat(t)).then(e).catch(n):n(new Error("unsupported file type for: ".concat(t)))})}function e(e){if("string"==typeof e)return t(e);var n=e.map(t);return Promise.all(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"pniV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./propertyTable.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(n,!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o={city:"",county:" county",state:""};function i(t,e,r,n){function a(t){return t*Math.PI/180}console.log(t,e,r,n);var o=a(t),i=a(r),c=a(r-t),u=a(n-e),s=Math.sin(c/2)*Math.sin(c/2)+Math.cos(o)*Math.cos(i)*Math.sin(u/2)*Math.sin(u/2);return 3958.756*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function c(t,e){console.log(t);var r=e.map(function(e){return n({},e,{distance:i(t.latitude,t.longitude,+e.Latitude,+e.Longitude)})}).filter(function(t){return!isNaN(t.distance)});return r.sort(function(t,e){return d3.descending(e.distance,t.distance)}),r}function u(e,r,n,a){e.select(".results-wrapper").style("display","block");var i=n.attr("geo-selected"),u=e.select(".results-wrapper").selectAll("p").data(r,function(t){return t.locationName});u.enter().append("p").text(function(t){return"state"==i?t.locationName+o[i]:"".concat(t.locationName+o[i],", ").concat(t.state_iso2.toUpperCase())}).on("click",function(r){var o=n.attr("type-selected");e.select("input").node().value="",n.attr("data-city",r.locationName),n.attr("data-state",r.state_iso2);var i=c({latitude:+r.Latitude,longitude:+r.Longitude},a);n.select(".results-wrapper").style("display",null),"table"==o&&t.default.buildTable(n,i)}),u.exit().remove()}function s(t){return t.replace(/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,"\\$&")}function l(t,e){var r=new RegExp("\\b".concat(s(e)),"i");return t.filter(function(t){return r.test(t.locationName)}).slice(0,10)}function p(t,e,r){var n=t.select(".search"),a=null;n.select("input").on("keyup",function(){this.value.trim().length>2&&(a=l(e,this.value.trim())).length>0?u(n,a,t,e):t.select(".results-wrapper").style("display",null)}),n.node().addEventListener("focusout",function(e){var r=d3.timer(function(e){e>200&&(r.stop(),t.select(".results-wrapper").style("display",null))},500)})}var d={setupSearchBox:p,findNearest:c};exports.default=d;
},{"./propertyTable.js":"ThHl"}],"ThHl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./searchCreate.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function a(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(a,!0).forEach(function(e){n(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=d3.format(","),c=[],l="Cleveland",i=null,s=null,u=null,p={city:"",county:" county",state:""};function d(t){d3.select(".table-wrapper").selectAll(".property-table").style("display",null),d3.select(".table-wrapper").select("."+t+"-table").style("display","block")}function f(t,e){i=t.attr("geo-selected"),l=t.attr("data-city"),s=t.attr("data-state"),t.select(".city-selected").text(l);var r=t.select(".table"),a=e.sort(function(t,e){return t.locationName==l?-1:e.locationName==l?1:0}),n=r.selectAll("div").data(a.slice(0,10),function(t,e){return t.locationName+e}),c=n.enter().append("div").attr("class","row");n.exit().remove(),c.classed("selected",function(t,e){return t.locationName==l});c.append("p").text(function(t){return"state"==i?t.locationName:"".concat(t.locationName+p[i],", ").concat(t.state_iso2.toUpperCase())}).attr("class","city-name"),c.append("p").text(function(t){return o(Math.round(t["FS 2020 100 Year Risk (total)"]))}).attr("class","flooded-property-count"),c.append("p").text(function(t){return o(Math.round(t["Total Properties"]))}).attr("class","property-count"),c.append("p").text(function(t){return"".concat(Math.round(t["FS 2020 100 Year Risk (total)"]/t["Total Properties"]*100),"%")}).attr("class","percent")}function y(t,e){var r=e.map(function(e){return a({},e,{distance:calculatingDistance(t.latitude,t.longitude,+e.Latitude,+e.Longitude)})}).filter(function(t){return!isNaN(t.distance)});return r.sort(function(t,e){return d3.descending(e.distance,t.distance)}),r}function b(e,r,a,n){i=n,r.attr("geo-selected",i),r.attr("type-selected","table"),u=a[i][0],r.attr("data-city",u.locationName),r.attr("data-state",u.state_iso2),console.log(a[n]),f(r,a[n]),t.default.setupSearchBox(r,e,i)}var O={init:b,buildTable:f,tableButtonClick:d};exports.default=O;
},{"./searchCreate.js":"pniV"}],"b8Pa":[function(require,module,exports) {
"use strict";function e(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function t(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(a,!0).forEach(function(e){o(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function o(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var n;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a={city:"",county:" county",state:"",zipcode:"zipcode"};function r(e){return"climate"==e?[1,1.15]:"fema"==e?[1,5]:void 0}function i(e,t){return"zipcode"==t?4:2.5}function c(e,t){return"zipcode"==t?4:1}function l(e,o){var n=o.map(function(o){return t({},o,{distance:s(e.latitude,e.longitude,+o.Latitude,+o.Longitude)})}).filter(function(e){return!isNaN(e.distance)});return n.sort(function(e,t){return d3.descending(t.distance,e.distance)}),n}function s(e,t,o,n){function a(e){return e*Math.PI/180}var r=a(e),i=a(o),c=a(o-e),l=a(n-t),s=Math.sin(c/2)*Math.sin(c/2)+Math.cos(r)*Math.cos(i)*Math.sin(l/2)*Math.sin(l/2);return 3958.756*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function u(e,t){console.log(e.node());var o=e.select(".legend");o.append("p").attr("class","legend-text").text("no change");var n=e.select(".legend").append("div").attr("class","legend-colors");o.append("p").attr("class","legend-text").text("+"+Math.round(100*(r(t)[1]-1))+"%"),n.selectAll("div").data([.1,.3,.6,.9,1]).enter().append("div").attr("class","legend-item").style("background",function(e){return d3.interpolateRdPu(e)})}function p(e,t){e.select(".map").select(".map-tooltip").style("display",t)}function d(e,t,o,n){var r=e.select(".map").select(".map-tooltip");r.style("left",o.x+"px").style("top",o.y+"px"),r.html("<p>"+t.locationName+" "+a[n.geo]+"</p><p>"+Math.round(100*(y(+t[n.variableOne],+t[n.variableTwo],n)-1))+"% increase in properties affected by flooding</p>")}function f(e,t){e.select(".map").append("div").attr("class","map-tooltip")}function y(e,t,o){return"climate"==o.scope?t/e:"fema"==o.scope?t/e:void 0}function v(e,t,o,a,s,v,b){var m={locationInput:e,data:t,container:o,geo:a,scope:s,variableOne:v,variableTwo:b},h=d3.map(t,function(e){return+e.index});mapboxgl.accessToken="pk.eyJ1IjoiZG9jazQyNDIiLCJhIjoiY2pjazE5eTM2NDl2aDJ3cDUyeDlsb292NiJ9.Jr__XbmAolbLyzPDj7-8kQ",u(o,s),n=l(e,t);var g=new mapboxgl.Map({container:o.select(".map").node(),style:"mapbox://styles/mapbox/light-v10",center:[-98.585522,39.8333333],minZoom:c(s,a),zoom:i(s,a)});f(o,g);var x=r(s),O=(d3.map(t,function(e){return+e.index}),d3.extent(t,function(e){return y(+e[v],+e[b],m)}),d3.scaleLinear().domain(x).range([.1,1]).clamp(!0));var j,M=["match",["id"]],P=[];for(var L in t){var w=+t[L].index,D=y(+t[L][v],+t[L][b],m);"inf"==D&&(D=x[1]);var S=(j=+D)<1?"#aaa":d3.interpolateRdPu(O(j));w>0&&(M.push(w,S),P.push(w))}M.push("#f1f1f0");var k="mapbox://mapbox.boundaries-pos4-v3",z="boundaries_postal_4";"county"==a&&(k="mapbox://mapbox.boundaries-adm2-v3",z="boundaries_admin_2"),g.on("load",function(){function e(e){t.forEach(function(e){g.setFeatureState({source:"postal-2",sourceLayer:z,id:+e.index},{hover:!1})})}console.log(g.getStyle()),g.addSource("postal-2",{type:"vector",url:k}),g.addLayer({id:"postal-2-fill",type:"fill",source:"postal-2","source-layer":z,paint:{"fill-outline-color":"rgba(0,0,0,0)","fill-opacity":1,"fill-color":M}},"admin-1-boundary"),g.addLayer({id:"postal-2-line",type:"line",source:"postal-2","source-layer":z,paint:{"line-width":2,"line-opacity":["case",["boolean",["feature-state","hover"],!1],1,0],"line-color":"black"}}),g.isSourceLoaded("postal-2")?e():g.on("sourcedata",function t(o){"postal-2"===o.sourceId&&o.isSourceLoaded&&(e(),g.off("sourcedata",t))});var n=null;g.on("mousemove",function(e){var t=g.queryRenderedFeatures(e.point,{layers:["postal-2-fill"]});if(t.length>0)if(Object.keys(t[0]).indexOf("id")>-1){var a=t[0].id;if(h.has(+a)){if(n!=a){var r=h.get(+a);d(o,r,e.point,m),p(o,"block"),n&&g.setFeatureState({source:"postal-2",sourceLayer:z,id:n},{hover:!1}),n=a,g.setFeatureState({source:"postal-2",sourceLayer:z,id:a},{hover:!0})}}else p(o,"none")}else p(o,"none");else p(o,"none")}).on("mouseout",function(e){g.setFeatureState({source:"postal-2",sourceLayer:z,id:n},{hover:!1}),p(o,"none")})})}var b={init:v};exports.default=b;
},{}],"OhWS":[function(require,module,exports) {
"use strict";function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(i,!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e,r,n){function i(t){return t*Math.PI/180}var c=i(t),o=i(r),a=i(r-t),u=i(n-e),s=Math.sin(a/2)*Math.sin(a/2)+Math.cos(c)*Math.cos(o)*Math.sin(u/2)*Math.sin(u/2);return 3958.756*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function i(t,r){var i=r.map(function(r){return e({},r,{distance:n(t.latitude,t.longitude,+r.Latitude,+r.Longitude)})}).filter(function(t){return!isNaN(t.distance)});return i.sort(function(t,e){return d3.descending(e.distance,t.distance)}),i.slice(0,10)}function c(t,e){return new Promise(function(r,n){var c=[];["city","state","county","zip"].forEach(function(r){var n="".concat(r,"Data"),o=e[n],a=i(t,o);c[r]=a}),r(c)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;
},{}],"RVwr":[function(require,module,exports) {
"use strict";function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function e(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(a,!0).forEach(function(t){r(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=[],a=[],o="county",c=d3.select("[data-js='bars']"),i=c.select("[data-js='bar__figure-single']"),s=i.select("[data-js='bar__container-single']"),u=i.select(".figure__desc"),l=c.selectAll("input"),p=d3.scaleLinear(),f=0,d=0,b=[{propertyName:"FEMA Properties at Risk 2020 (total)",text:"...according to <span>FEMA</span>",key:"FEMA"},{propertyName:"FS 2020 100 Year Risk (total)",text:"...according to <span>new</span> estimates in 2020",key:"thisYear"},{propertyName:"FS 2035 100 Year Risk (total)",text:"in 2035",key:"fifteenYears"},{propertyName:"FS 2050 100 Year Risk (total)",text:"in 2050",key:"thirtyYears"}];function y(){var t=s.node().offsetWidth-d-f;p.domain([0,100]).range([0,t-d]).nice(),g()}function v(t){var e=s.selectAll(".g-bar").data(t,function(){return o}).join(function(t){var e=t.append("div").attr("class","g-bar");return e.append("div").attr("class","bar-container"),e.append("p").attr("class","bar-desc").html(function(t){return t.text}),e}).selectAll(".bar-container");e.selectAll(".bar-percent").data(function(t){return[t]},function(){return o}).join(function(t){return t.append("div").attr("class","bar bar-percent")}).style("width",function(t){return"".concat(p(100-t.value),"px")}),e.selectAll(".bar-data").data(function(t){return[t]},function(){return o}).join(function(t){var e=t.append("div").attr("class",function(t){return"bar bar-data bar-".concat(t.key)});return e.append("p"),e}).style("width",function(t){return"".concat(p(t.value),"px")}).select("p").text(function(t){return"".concat(t.value,"%")})}function g(){var t=n[o][0];v(b.map(function(r){return e({},r,{value:+Math.round(t[r.propertyName]/t["Total Properties"]*100)})})),u.select(".reader").text("county"===o?"".concat(t.locationName," County"):t.locationName)}function j(t){o=t.attr("id"),g()}function O(){y()}function m(t,e){n=e,a=t,O()}var x={init:m,resize:y,singleButtonClick:j};exports.default=x;
},{}],"Ch10":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=[],e=[],n="county",a=d3.select("[data-js='bars']"),r=a.select("[data-js='bar__figure-multi']"),c=r.select("[data-js='bar__container-multi']"),o=r.select(".figure__desc"),i=a.selectAll("input"),u=d3.scaleLinear(),s=0,l=32,f=d3.format(",.0f"),d=[{propertyName:"FEMA Properties at Risk 2020 (total)",key:"FEMA"},{propertyName:"FS 2020 100 Year Risk (total)",key:"thisYear"}];function p(){var t=c.node().offsetWidth-l-s;u.domain([0,100]).range([0,(t-l)/3]).nice()}function b(t){var e=c.selectAll(".g-bar").data(t,function(t){return t.name}).join(function(t){var e=t.append("div").attr("class","g-bar");return e.append("div").attr("class","text-group").append("p").attr("class","bar-desc bar-name"),e.append("div").attr("class","bar-container bar-container__fema"),e.append("div").attr("class","bar-container bar-container__fs"),e});e.selectAll(".bar-desc").text(function(t){return t.name});var n=e.selectAll(".bar-container__fema");n.selectAll(".bar-percent").data(function(t){return[t]},function(t){return t.name}).join(function(t){return t.append("div").attr("class","bar bar-percent")}).style("width",function(t){return"".concat(u(100-t.fema),"px")}),n.selectAll(".bar-data").data(function(t){return[t]},function(t){return t.name}).join(function(t){var e=t.append("div").attr("class",function(t){return"bar bar-data bar-FEMA"});return e.append("p"),e}).style("width",function(t){return"".concat(u(t.fema),"px")}).select("p").text(function(t){return"".concat(t.fema,"%")});var a=e.selectAll(".bar-container__fs");a.selectAll(".bar-percent").data(function(t){return[t]},function(t){return t.name}).join(function(t){return t.append("div").attr("class","bar bar-percent")}).style("width",function(t){return"".concat(u(100-t.fs),"px")}),a.selectAll(".bar-data").data(function(t){return[t]},function(t){return t.name}).join(function(t){var e=t.append("div").attr("class",function(t){return"bar bar-data bar-fs"});return e.append("p"),e}).style("width",function(t){return"".concat(u(t.fs),"px")}).select("p").text(function(t){return"".concat(t.fs,"%")})}function m(t){return console.log(t),t.map(function(t){return{name:t.locationName,fema:Math.round(+t["FEMA Properties at Risk 2020 (total)"]/+t["Total Properties"]*100),fs:Math.round(+t["FS 2020 100 Year Risk (total)"]/+t["Total Properties"]*100)}})}function v(){var e=m(t[n]);b(e),o.select(".reader").text("county"===n?"".concat(e[0].name," County"):e[0].name);var a=t[n][0]["FS-FEMA Difference, 2020 (total)"];o.select(".count").text(f(a))}function _(t){n=t.attr("id"),v()}function A(){p(),v()}function x(n,a){t=a,e=n,A()}var y={init:x,resize:p,multiButtonClick:_};exports.default=y;
},{}],"epB2":[function(require,module,exports) {
"use strict";var t=p(require("lodash.debounce")),e=p(require("./utils/is-mobile")),a=p(require("./utils/link-fix")),i=p(require("./footer")),n=p(require("./createGeojson")),r=p(require("./clusterMap")),l=p(require("./load-data")),u=p(require("./propertyTable")),o=p(require("./zipMap")),c=p(require("./utils/locate")),s=p(require("./utils/find-nearest")),d=p(require("./singleBars")),f=p(require("./multiBars"));function p(t){return t&&t.__esModule?t:{default:t}}function y(t,e){return v(t)||b(t,e)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function b(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],i=!0,n=!1,r=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done)&&(a.push(l.value),!e||a.length!==e);i=!0);}catch(o){n=!0,r=o}finally{try{i||null==u.return||u.return()}finally{if(n)throw r}}return a}}function v(t){if(Array.isArray(t))return t}var h={country_code:"US",country_name:"United States",region_code:"NY",region_name:"New York",city:"New York",zip_code:"10001",time_zone:"America/New_York",latitude:40.7789,longitude:-73.9692},k=d3.select("body"),z=0;function q(){var t=k.node().offsetWidth;z!==t&&(z=t,d.default.resize())}function w(){return new Promise(function(t,e){t(h)})}function D(){(0,a.default)(),k.classed("is-mobile",e.default.any()),window.addEventListener("resize",(0,t.default)(q,150));var i=[],c=i[0],p=i[1],m=i[2],b=i[3],v=[];(0,l.default)(["city4.csv","zip4-1.csv","county4.csv","state4.csv"]).then(function(t){var e=y(t,4);c=e[0],p=e[1],m=e[2],b=e[3],v={cityData:c,zipData:p,countyData:m,stateData:b}}).then(w).then(function(t){return(0,s.default)(t,v)}).then(function(t){d.default.init(v,t),f.default.init(v,t),d3.select(".bar-wrapper").selectAll("input").on("change",function(t){var e=d3.select(this);d.default.singleButtonClick(e),f.default.multiButtonClick(e)});var e=d3.select(".table-wrapper").select('input[name="table-controls"]:checked').attr("value");u.default.tableButtonClick(e),d3.select(".table-wrapper").selectAll("input").on("change",function(t){u.default.tableButtonClick(d3.select(this).attr("value"))}),u.default.init(v.countyData,d3.select(".county-table"),t,"county"),u.default.init(v.cityData,d3.select(".city-table"),t,"city"),u.default.init(v.stateData,d3.select(".state-table"),t,"state"),o.default.init(t,v.countyData,d3.select(".climate-map-county"),"county","climate","FS 2020 100 Year Risk (total)","FS 2050 100 Year Risk (total)"),o.default.init(t,v.zipData,d3.select(".climate-map-zip"),"zipcode","climate","FS 2020 100 Year Risk (total)","FS 2050 100 Year Risk (total)"),o.default.init(t,v.countyData,d3.select(".fema-map-county"),"county","fema","FEMA Properties at Risk 2020 (total)","FS 2020 100 Year Risk (total)"),o.default.init(t,v.zipData,d3.select(".fema-map-zip"),"zipcode","fema","FEMA Properties at Risk 2020 (total)","FS 2020 100 Year Risk (total)"),r.default.init(n.default.init(v.zipData))}).catch(function(t){console.log(t)})}D();
},{"lodash.debounce":"or4r","./utils/is-mobile":"WEtf","./utils/link-fix":"U9xJ","./footer":"v9Q8","./createGeojson":"HxQE","./clusterMap":"qaWx","./load-data":"xZJw","./propertyTable":"ThHl","./zipMap":"b8Pa","./utils/locate":"NSOq","./utils/find-nearest":"OhWS","./singleBars":"RVwr","./multiBars":"Ch10"}]},{},["epB2"], null)